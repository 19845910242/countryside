<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç ”å­¦é¡¹ç›®æŸ¥è¯¢ - ä¹¡éŸµæ™ºå­¦</title>
  <style>
    /* ä½¿ç”¨ä¸åŸºåœ°ç”³æŠ¥é¡µé¢ç›¸åŒçš„æ ·å¼å˜é‡å’ŒåŸºç¡€æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Microsoft YaHei', sans-serif;
    }

    :root {
      --primary-color: #4a7c59;
      --primary-dark: #3a6b49;
      --primary-light: #c8e6c9;
      --accent-color: #e6b450;
      --text-dark: #2c3e2d;
      --text-light: #6b8e6b;
      --bg-light: #f9fffa;
      --white: #ffffff;
      --gray-light: #f5f5f5;
    }

    body {
      background: linear-gradient(135deg, #e6f2e6, #c8e6c9);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* å¯¼èˆªæ  */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      z-index: 100;
      padding: 15px 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: var(--primary-color);
      display: flex;
      align-items: center;
    }

    .logo-icon {
      margin-right: 10px;
      font-size: 28px;
    }

    .nav-links {
      display: flex;
      list-style: none;
    }

    .nav-links li {
      margin-left: 30px;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-dark);
      font-weight: 500;
      transition: color 0.3s;
      position: relative;
      padding: 5px 0;
    }

    .nav-links a:hover {
      color: var(--primary-color);
    }

    .nav-links a.active {
      color: var(--primary-color);
    }

    .nav-links a.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--primary-color);
      border-radius: 2px;
    }

    .user-actions {
      display: flex;
      align-items: center;
    }

    .user-actions a {
      text-decoration: none;
      color: var(--text-dark);
      margin-left: 20px;
      transition: color 0.3s;
    }

    .user-actions a:hover {
      color: var(--primary-color);
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      margin-left: 20px;
      cursor: pointer;
      position: relative;
    }

    .user-menu {
      position: absolute;
      top: 50px;
      right: 0;
      background: white;
      border-radius: 8px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      width: 180px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s;
    }

    .user-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .user-menu a {
      display: block;
      padding: 12px 15px;
      color: var(--text-dark);
      text-decoration: none;
      border-bottom: 1px solid #f0f0f0;
      transition: background 0.2s;
    }

    .user-menu a:hover {
      background: #f9f9f9;
      color: var(--primary-color);
    }

    .user-menu a:last-child {
      border-bottom: none;
    }

    /* ä¸»å†…å®¹åŒº */
    .main-content {
      margin-top: 80px;
      padding: 40px 5%;
    }

    /* é¡µé¢æ ‡é¢˜ */
    .page-header {
      text-align: center;
      margin-bottom: 50px;
    }

    .page-title {
      font-size: 36px;
      color: var(--primary-color);
      margin-bottom: 15px;
    }

    .page-subtitle {
      font-size: 18px;
      color: var(--text-light);
      max-width: 600px;
      margin: 0 auto;
    }

    /* é¡µè„š */
    .footer {
      background: var(--primary-color);
      color: var(--white);
      padding: 40px 5%;
      text-align: center;
    }

    .footer-content {
      max-width: 1000px;
      margin: 0 auto;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }

    .footer-links a {
      color: var(--white);
      text-decoration: none;
      margin: 0 15px;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--accent-color);
    }

    .copyright {
      margin-top: 20px;
      font-size: 14px;
      opacity: 0.8;
    }

    /* æœç´¢ç­›é€‰åŒºåŸŸ */
    .search-section {
      background: var(--white);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
    }

    .search-title {
      font-size: 24px;
      color: var(--primary-color);
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--primary-light);
    }

    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }

    .filter-group {
      flex: 1;
      min-width: 200px;
    }

    .filter-label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-dark);
      font-weight: 500;
    }

    .filter-select, .filter-input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--primary-light);
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
    }

    .filter-select:focus, .filter-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(74, 124, 89, 0.1);
    }

    .search-button {
      display: block;
      width: 100%;
      padding: 15px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .search-button:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(74, 124, 89, 0.3);
    }

    /* é¡¹ç›®å±•ç¤ºåŒºåŸŸ */
    .projects-section {
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 28px;
      color: var(--primary-color);
      margin-bottom: 30px;
      text-align: center;
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .project-card {
      background: var(--white);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s;
    }

    .project-card:hover {
      transform: translateY(-5px);
    }

    .project-image {
      height: 200px;
      background-color: var(--primary-light);
      background-size: cover;
      background-position: center;
    }

    .project-content {
      padding: 20px;
    }

    .project-title {
      font-size: 20px;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .project-location, .project-theme, .project-duration {
      color: var(--text-light);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .project-location::before, .project-theme::before, .project-duration::before {
      content: "ğŸ“";
      margin-right: 8px;
    }

    .project-theme::before {
      content: "ğŸ·ï¸";
    }

    .project-duration::before {
      content: "â±ï¸";
    }

    .project-price {
      font-size: 18px;
      color: var(--accent-color);
      font-weight: bold;
      margin: 15px 0;
    }

    .project-select-button {
      display: block;
      width: 100%;
      padding: 10px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .project-select-button:hover {
      background: var(--primary-dark);
    }

    /* è¡Œç¨‹ç”ŸæˆåŒºåŸŸ */
    .itinerary-section {
      background: var(--white);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
    }

    .itinerary-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .itinerary-title {
      font-size: 24px;
      color: var(--primary-color);
    }

    .itinerary-actions {
      display: flex;
      gap: 10px;
    }

    .action-button {
      padding: 8px 15px;
      border: 1px solid var(--primary-color);
      border-radius: 5px;
      background: white;
      color: var(--primary-color);
      cursor: pointer;
      transition: all 0.3s;
    }

    .action-button:hover {
      background: var(--primary-color);
      color: white;
    }

    .itinerary-days {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .day-card {
      border: 1px solid var(--primary-light);
      border-radius: 10px;
      overflow: hidden;
    }

    .day-header {
      background: var(--primary-light);
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .day-title {
      font-size: 18px;
      color: var(--primary-color);
      font-weight: bold;
    }

    .day-content {
      padding: 20px;
    }

    .activity-item {
      display: flex;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--gray-light);
    }

    .activity-time {
      font-weight: bold;
      color: var(--primary-color);
      min-width: 100px;
    }

    .activity-details {
      flex: 1;
    }

    .activity-title {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .activity-description {
      color: var(--text-light);
      font-size: 14px;
    }

    /* è´¹ç”¨æ±‡æ€» */
    .cost-summary {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .cost-title {
      font-size: 18px;
      color: var(--primary-color);
      margin-bottom: 15px;
    }

    .cost-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .cost-total {
      border-top: 1px solid var(--primary-light);
      padding-top: 10px;
      margin-top: 10px;
      font-weight: bold;
      font-size: 18px;
    }

    /* é¡µé¢åˆ‡æ¢ */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        padding: 15px;
      }

      .nav-links {
        margin: 20px 0;
      }

      .nav-links li {
        margin: 0 10px;
      }

      .page-title {
        font-size: 28px;
      }

      .filter-row {
        flex-direction: column;
      }

      .filter-group {
        min-width: 100%;
      }

      .projects-grid {
        grid-template-columns: 1fr;
      }

      .itinerary-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
    }
  </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="navbar">
  <div class="logo">
    <span class="logo-icon"><img style="width: 50px;height: 50px" src="./images/27.png" alt=""></span>
    ä¹¡éŸµæ™ºå­¦
  </div>
  <ul class="nav-links">
    <li><a href="./index.html">é¦–é¡µ</a></li>
    <li><a href="./courses.html">è¯¾ç¨‹ä¸­å¿ƒ</a></li>
    <li><a href="./vr.html">VRä½“éªŒ</a></li>
    <li><a href="./ai.html">AIåŠ©æ‰‹</a></li>
    <li><a href="./base-application.html">åŸºåœ°ç”³æŠ¥</a></li>
    <li><a href="./project-search.html" class="active">ç ”å­¦é¡¹ç›®</a></li>
  </ul>
</nav>

<!-- ä¸»å†…å®¹åŒº -->
<main class="main-content">
  <!-- é¡¹ç›®æœç´¢é¡µé¢ -->
  <div id="search-page" class="page active">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <header class="page-header">
      <h1 class="page-title">ç ”å­¦é¡¹ç›®æŸ¥è¯¢</h1>
      <p class="page-subtitle">æ ¹æ®æ‚¨çš„éœ€æ±‚ç­›é€‰å’Œé€‰æ‹©ç ”å­¦é¡¹ç›®ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–è¡Œç¨‹è®¡åˆ’</p>
    </header>

    <!-- æœç´¢ç­›é€‰åŒºåŸŸ -->
    <section class="search-section">
      <h2 class="search-title">ç­›é€‰æ¡ä»¶</h2>
      <form id="search-form">
        <div class="filter-row">
          <div class="filter-group">
            <label class="filter-label" for="destination">ç›®çš„åœ°</label>
            <select id="destination" class="filter-select">
              <option value="">è¯·é€‰æ‹©ç›®çš„åœ°</option>
              <option value="zhejiang">æµ™æ±Ÿçœ</option>
              <option value="jiangsu">æ±Ÿè‹çœ</option>
              <option value="anhui">å®‰å¾½çœ</option>
              <option value="jiangxi">æ±Ÿè¥¿çœ</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label" for="theme">ç ”å­¦ä¸»é¢˜</label>
            <select id="theme" class="filter-select">
              <option value="">è¯·é€‰æ‹©ç ”å­¦ä¸»é¢˜</option>
              <option value="agriculture">ç°ä»£å†œä¸š</option>
              <option value="culture">éé—æ–‡åŒ–</option>
              <option value="red">çº¢è‰²æ•™è‚²</option>
              <option value="nature">è‡ªç„¶æ¢ç´¢</option>
              <option value="science">ç§‘æŠ€ä½“éªŒ</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label" for="duration">å‡ºè¡Œå¤©æ•°</label>
            <select id="duration" class="filter-select">
              <option value="">è¯·é€‰æ‹©å‡ºè¡Œå¤©æ•°</option>
              <option value="1">1å¤©</option>
              <option value="2">2å¤©</option>
              <option value="3">3å¤©</option>
              <option value="4">4å¤©åŠä»¥ä¸Š</option>
            </select>
          </div>
        </div>

        <div class="filter-row">
          <div class="filter-group">
            <label class="filter-label" for="adults">æˆäººæ•°é‡</label>
            <input type="number" id="adults" class="filter-input" min="1" value="2">
          </div>

          <div class="filter-group">
            <label class="filter-label" for="children">å„¿ç«¥æ•°é‡</label>
            <input type="number" id="children" class="filter-input" min="0" value="1">
          </div>

          <div class="filter-group">
            <label class="filter-label" for="travel-date">å‡ºè¡Œæ—¥æœŸ</label>
            <input type="date" id="travel-date" class="filter-input">
          </div>
        </div>

        <div class="filter-row">
          <div class="filter-group">
            <label class="filter-label">æœåŠ¡éœ€æ±‚</label>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 5px;">
              <label style="display: flex; align-items: center; gap: 5px;">
                <input type="checkbox" name="services" value="lunch"> åˆé¤
              </label>
              <label style="display: flex; align-items: center; gap: 5px;">
                <input type="checkbox" name="services" value="insurance"> ä¿é™©
              </label>
              <label style="display: flex; align-items: center; gap: 5px;">
                <input type="checkbox" name="services" value="transportation"> åŒ…è½¦
              </label>
              <label style="display: flex; align-items: center; gap: 5px;">
                <input type="checkbox" name="services" value="guide"> å¯¼æ¸¸
              </label>
            </div>
          </div>
        </div>

        <button type="submit" class="search-button">æœç´¢ç ”å­¦é¡¹ç›®</button>
      </form>
    </section>

    <!-- é¡¹ç›®å±•ç¤ºåŒºåŸŸ -->
    <section class="projects-section">
      <h2 class="section-title">æ¨èç ”å­¦é¡¹ç›®</h2>
      <div class="projects-grid" id="projects-grid">
        <!-- é¡¹ç›®å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </section>
  </div>

  <!-- è¡Œç¨‹ç”Ÿæˆé¡µé¢ -->
  <div id="itinerary-page" class="page">
    <header class="page-header">
      <h1 class="page-title">æ‚¨çš„ä¸ªæ€§åŒ–ç ”å­¦è¡Œç¨‹</h1>
      <p class="page-subtitle">ä»¥ä¸‹æ˜¯æ ¹æ®æ‚¨çš„éœ€æ±‚ç”Ÿæˆçš„ç ”å­¦è¡Œç¨‹è®¡åˆ’</p>
    </header>

    <section class="itinerary-section">
      <div class="itinerary-header">
        <h2 class="itinerary-title" id="itinerary-project-title">æ­å·ç°ä»£å†œä¸šç ”å­¦ä¹‹æ—…</h2>
        <div class="itinerary-actions">
          <button class="action-button" id="edit-itinerary">ä¿®æ”¹è¡Œç¨‹</button>
          <button class="action-button" id="print-itinerary">æ‰“å°è¡Œç¨‹</button>
          <button class="action-button" id="save-itinerary">ä¿å­˜è¡Œç¨‹</button>
        </div>
      </div>

      <div class="filter-row" style="margin-bottom: 20px;">
        <div class="filter-group">
          <label class="filter-label">å‡ºè¡Œæ—¥æœŸ</label>
          <div id="itinerary-date" style="padding: 12px 0;">2023å¹´10æœˆ15æ—¥</div>
        </div>

        <div class="filter-group">
          <label class="filter-label">å‡ºè¡Œäººæ•°</label>
          <div id="itinerary-people" style="padding: 12px 0;">2ä½æˆäººï¼Œ1ä½å„¿ç«¥</div>
        </div>

        <div class="filter-group">
          <label class="filter-label">è¡Œç¨‹å¤©æ•°</label>
          <div id="itinerary-duration" style="padding: 12px 0;">2å¤©1æ™š</div>
        </div>
      </div>

      <div class="itinerary-days" id="itinerary-days">
        <!-- è¡Œç¨‹å¤©æ•°å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>

      <div class="cost-summary">
        <h3 class="cost-title">è´¹ç”¨æ±‡æ€»</h3>
        <div class="cost-item">
          <span>é¡¹ç›®è´¹ç”¨</span>
          <span id="cost-project">Â¥980</span>
        </div>
        <div class="cost-item">
          <span>åˆé¤è´¹ç”¨</span>
          <span id="cost-lunch">Â¥150</span>
        </div>
        <div class="cost-item">
          <span>ä¿é™©è´¹ç”¨</span>
          <span id="cost-insurance">Â¥30</span>
        </div>
        <div class="cost-item">
          <span>äº¤é€šè´¹ç”¨</span>
          <span id="cost-transportation">Â¥200</span>
        </div>
        <div class="cost-item cost-total">
          <span>æ€»è®¡</span>
          <span id="cost-total">Â¥1360</span>
        </div>
      </div>

      <div style="text-align: center; margin-top: 30px;">
        <button class="search-button" id="confirm-itinerary">ç¡®è®¤è¡Œç¨‹å¹¶é¢„è®¢</button>
      </div>
    </section>
  </div>
</main>

<!-- é¡µè„š -->
<footer class="footer">
  <div class="footer-content">
    <div class="logo" style="color: white; justify-content: center; margin-bottom: 20px;">
      <span class="logo-icon"><img style="width: 50px;height: 50px" src="./images/27.png" alt=""></span>
      ä¹¡éŸµæ™ºå­¦
    </div>
    <div class="footer-links">
      <a href="#">å…³äºæˆ‘ä»¬</a>
      <a href="#">è”ç³»æˆ‘ä»¬</a>
      <a href="#">éšç§æ”¿ç­–</a>
      <a href="#">ç”¨æˆ·åè®®</a>
      <a href="#">å¸®åŠ©ä¸­å¿ƒ</a>
    </div>
    <p class="copyright">Â© 2025 ä¹¡éŸµæ™ºå­¦ ç‰ˆæƒæ‰€æœ‰</p>
  </div>
</footer>

<script>
  // æ¨¡æ‹Ÿçš„ç ”å­¦é¡¹ç›®æ•°æ®
  const projects = [
    {
      id: 1,
      title: "æ­å·ç°ä»£å†œä¸šç ”å­¦ä¹‹æ—…",
      location: "æµ™æ±Ÿæ­å·",
      theme: "ç°ä»£å†œä¸š",
      duration: "2å¤©1æ™š",
      price: 980,
      image: "https://img1.baidu.com/it/u=2426015305,4028664080&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500",
      description: "ä½“éªŒç°ä»£å†œä¸šç§‘æŠ€ï¼Œäº†è§£æ™ºæ…§å†œä¸šåº”ç”¨ï¼Œäº²æ‰‹å‚ä¸å†œäº‹æ´»åŠ¨ã€‚"
    },
    {
      id: 2,
      title: "æ™¯å¾·é•‡éé—é™¶ç“·ä½“éªŒ",
      location: "æ±Ÿè¥¿æ™¯å¾·é•‡",
      theme: "éé—æ–‡åŒ–",
      duration: "3å¤©2æ™š",
      price: 1280,
      image: "https://img2.baidu.com/it/u=1489256434,3648194442&fm=253&fmt=auto&app=138&f=JPEG?w=569&h=427",
      description: "å­¦ä¹ é™¶ç“·åˆ¶ä½œå·¥è‰ºï¼Œä½“éªŒä¼ ç»Ÿæ‰‹å·¥è‰ºé­…åŠ›ï¼Œåˆ›ä½œä¸ªäººé™¶ç“·ä½œå“ã€‚"
    },
    {
      id: 3,
      title: "äº•å†ˆå±±çº¢è‰²æ•™è‚²ç ”å­¦",
      location: "æ±Ÿè¥¿äº•å†ˆå±±",
      theme: "çº¢è‰²æ•™è‚²",
      duration: "2å¤©1æ™š",
      price: 860,
      image: "https://img0.baidu.com/it/u=2819633026,3737824749&fm=253&fmt=auto&app=138&f=JPEG?w=1068&h=800",
      description: "è¿½å¯»é©å‘½è¶³è¿¹ï¼Œå­¦ä¹ çº¢è‰²å†å²ï¼ŒåŸ¹å…»çˆ±å›½ä¸»ä¹‰ç²¾ç¥ã€‚"
    },
    {
      id: 4,
      title: "é»„å±±è‡ªç„¶ç”Ÿæ€æ¢ç´¢",
      location: "å®‰å¾½é»„å±±",
      theme: "è‡ªç„¶æ¢ç´¢",
      duration: "3å¤©2æ™š",
      price: 1120,
      image: "https://img2.baidu.com/it/u=3684979215,3073760161&fm=253&fmt=auto&app=120&f=JPEG?w=667&h=500",
      description: "æ¢ç´¢é»„å±±è‡ªç„¶ç”Ÿæ€ï¼Œå­¦ä¹ ç”Ÿç‰©å¤šæ ·æ€§ï¼Œä½“éªŒæˆ·å¤–æ¢é™©ä¹è¶£ã€‚"
    },
    {
      id: 5,
      title: "è‹å·å›­æ—æ–‡åŒ–ä½“éªŒ",
      location: "æ±Ÿè‹è‹å·",
      theme: "éé—æ–‡åŒ–",
      duration: "1å¤©",
      price: 480,
      image: "https://img1.baidu.com/it/u=944856464,3629191788&fm=253&fmt=auto&app=138&f=JPEG?w=634&h=475",
      description: "é¢†ç•¥è‹å·å›­æ—è‰ºæœ¯ï¼Œå­¦ä¹ ä¼ ç»Ÿå»ºç­‘æ–‡åŒ–ï¼Œä½“éªŒå¤å…¸ç¾å­¦ã€‚"
    }
  ];

  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
  document.addEventListener('DOMContentLoaded', function() {
    // è·å–é¡µé¢å…ƒç´ 
    const searchPage = document.getElementById('search-page');
    const itineraryPage = document.getElementById('itinerary-page');
    const searchForm = document.getElementById('search-form');
    const projectsGrid = document.getElementById('projects-grid');
    const itineraryDays = document.getElementById('itinerary-days');

    // ç”¨æˆ·èœå•åŠŸèƒ½
    const userAvatar = document.getElementById('userAvatar');
    const userMenu = document.getElementById('userMenu');
    userAvatar.addEventListener('click', function() {
      userMenu.classList.toggle('active');
    });

    // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­ç”¨æˆ·èœå•
    document.addEventListener('click', function(e) {
      if (!userAvatar.contains(e.target) && !userMenu.contains(e.target)) {
        userMenu.classList.remove('active');
      }
    });

    // åˆå§‹åŒ–é¡¹ç›®å±•ç¤º
    renderProjects(projects);

    // æœç´¢è¡¨å•æäº¤äº‹ä»¶
    searchForm.addEventListener('submit', function(e) {
      e.preventDefault();

      // è·å–ç­›é€‰æ¡ä»¶
      const destination = document.getElementById('destination').value;
      const theme = document.getElementById('theme').value;
      const duration = document.getElementById('duration').value;

      // è¿‡æ»¤é¡¹ç›®
      let filteredProjects = projects;

      if (destination) {
        filteredProjects = filteredProjects.filter(project =>
                project.location.includes(getProvinceName(destination))
        );
      }

      if (theme) {
        filteredProjects = filteredProjects.filter(project =>
                project.theme.includes(getThemeName(theme))
        );
      }

      if (duration) {
        filteredProjects = filteredProjects.filter(project =>
                project.duration.includes(getDurationText(duration))
        );
      }

      // æ¸²æŸ“è¿‡æ»¤åçš„é¡¹ç›®
      renderProjects(filteredProjects);
    });

    // ç¼–è¾‘è¡Œç¨‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('edit-itinerary').addEventListener('click', function() {
      itineraryPage.classList.remove('active');
      searchPage.classList.add('active');
      window.scrollTo(0, 0);
    });

    // æ‰“å°è¡Œç¨‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('print-itinerary').addEventListener('click', function() {
      window.print();
    });

    // ä¿å­˜è¡Œç¨‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('save-itinerary').addEventListener('click', function() {
      alert('è¡Œç¨‹å·²ä¿å­˜åˆ°ä¸ªäººä¸­å¿ƒï¼');
    });

    // ç¡®è®¤è¡Œç¨‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('confirm-itinerary').addEventListener('click', function() {
      // æ”¶é›†æ‰€æœ‰éœ€è¦ä¼ é€’çš„æ•°æ®
      const orderData = {
        project: document.getElementById('itinerary-project-title').textContent,
        location: 'æµ™æ±Ÿè¿›åŒ–', // æ ¹æ®å®é™…é¡¹ç›®æ•°æ®è®¾ç½®
        theme: 'ç°ä»£å†œä¸š', // æ ¹æ®å®é™…é¡¹ç›®æ•°æ®è®¾ç½®
        duration: document.getElementById('itinerary-duration').textContent,
        date: document.getElementById('itinerary-date').textContent,
        adults: document.getElementById('adults').value || '2',
        children: document.getElementById('children').value || '1',
        contact: 'å¼ å°å§', // ä»è¡¨å•è·å–
        phone: '18072118962', // ä»è¡¨å•è·å–
        email: 'zhang@qq.com', // ä»è¡¨å•è·å–
        total: document.getElementById('cost-total').textContent.replace('Â¥', '')
      };

      // ç”Ÿæˆè®¢å•ID
      const orderId = 'XY' + new Date().getFullYear() +
              String(new Date().getMonth() + 1).padStart(2, '0') +
              String(new Date().getDate()).padStart(2, '0') +
              String(Math.floor(Math.random() * 1000)).padStart(3, '0');

      // æ„å»ºURLå‚æ•°
      const params = new URLSearchParams();
      params.append('orderId', orderId);
      Object.keys(orderData).forEach(key => {
        params.append(key, orderData[key]);
      });

      // è·³è½¬åˆ°æˆåŠŸé¡µé¢
      window.location.href = 'project_success.html?' + params.toString();
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è·³è½¬åˆ°é¢„è®¢é¡µé¢
    });

    // æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
    function renderProjects(projectsList) {
      projectsGrid.innerHTML = '';

      if (projectsList.length === 0) {
        projectsGrid.innerHTML = '<p style="text-align: center; width: 100%; padding: 40px; color: var(--text-light);">æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç ”å­¦é¡¹ç›®</p>';
        return;
      }

      projectsList.forEach(project => {
        const projectCard = document.createElement('div');
        projectCard.className = 'project-card';
        projectCard.innerHTML = `
                    <div class="project-image" style="background-image: url('${project.image}')"></div>
                    <div class="project-content">
                        <h3 class="project-title">${project.title}</h3>
                        <p class="project-location">${project.location}</p>
                        <p class="project-theme">${project.theme}</p>
                        <p class="project-duration">${project.duration}</p>
                        <p class="project-price">Â¥${project.price}/äºº</p>
                        <p style="color: var(--text-light); margin-bottom: 15px; font-size: 14px;">${project.description}</p>
                        <button class="project-select-button" data-id="${project.id}">é€‰æ‹©æ­¤é¡¹ç›®</button>
                    </div>
                `;

        projectsGrid.appendChild(projectCard);
      });

      // ä¸ºé€‰æ‹©æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
      document.querySelectorAll('.project-select-button').forEach(button => {
        button.addEventListener('click', function() {
          const projectId = this.getAttribute('data-id');
          const selectedProject = projects.find(p => p.id == projectId);
          generateItinerary(selectedProject);
        });
      });
    }

    // ç”Ÿæˆè¡Œç¨‹
    function generateItinerary(project) {
      // è·å–ç”¨æˆ·é€‰æ‹©çš„é€‰é¡¹
      const adults = document.getElementById('adults').value || 2;
      const children = document.getElementById('children').value || 1;
      const travelDate = document.getElementById('travel-date').value || '2023-10-15';
      const lunchSelected = document.querySelector('input[name="services"][value="lunch"]').checked;
      const insuranceSelected = document.querySelector('input[name="services"][value="insurance"]').checked;
      const transportationSelected = document.querySelector('input[name="services"][value="transportation"]').checked;

      // æ›´æ–°è¡Œç¨‹é¡µé¢ä¿¡æ¯
      document.getElementById('itinerary-project-title').textContent = project.title;
      document.getElementById('itinerary-date').textContent = formatDate(travelDate);
      document.getElementById('itinerary-people').textContent = `${adults}ä½æˆäººï¼Œ${children}ä½å„¿ç«¥`;
      document.getElementById('itinerary-duration').textContent = project.duration;

      // ç”Ÿæˆè¡Œç¨‹å¤©æ•°
      itineraryDays.innerHTML = '';
      const dayCount = parseInt(project.duration) || 2;

      for (let i = 1; i <= dayCount; i++) {
        const dayCard = document.createElement('div');
        dayCard.className = 'day-card';

        let dayContent = '';
        if (i === 1) {
          dayContent = `
                        <div class="activity-item">
                            <div class="activity-time">08:00-09:30</div>
                            <div class="activity-details">
                                <div class="activity-title">é›†åˆå‡ºå‘</div>
                                <div class="activity-description">å‰å¾€${project.location}ï¼Œé€”ä¸­ä»‹ç»è¡Œç¨‹å®‰æ’å’Œæ³¨æ„äº‹é¡¹</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">09:30-12:00</div>
                            <div class="activity-details">
                                <div class="activity-title">${project.theme}ä½“éªŒæ´»åŠ¨ä¸€</div>
                                <div class="activity-description">å‚ä¸${project.theme}ç›¸å…³å®è·µæ´»åŠ¨ï¼Œå­¦ä¹ ç›¸å…³çŸ¥è¯†</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">12:00-13:30</div>
                            <div class="activity-details">
                                <div class="activity-title">åˆé¤ä¼‘æ¯</div>
                                <div class="activity-description">${lunchSelected ? 'äº«ç”¨å½“åœ°ç‰¹è‰²åˆé¤' : 'è‡ªç”±ç”¨é¤æ—¶é—´'}</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">13:30-16:30</div>
                            <div class="activity-details">
                                <div class="activity-title">${project.theme}ä½“éªŒæ´»åŠ¨äºŒ</div>
                                <div class="activity-description">æ·±å…¥ä½“éªŒ${project.theme}æ´»åŠ¨ï¼ŒåŠ¨æ‰‹å®è·µ</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">16:30-17:30</div>
                            <div class="activity-details">
                                <div class="activity-title">æ€»ç»“åˆ†äº«</div>
                                <div class="activity-description">åˆ†äº«å½“å¤©å­¦ä¹ å¿ƒå¾—ï¼Œæ€»ç»“æ”¶è·</div>
                            </div>
                        </div>
                        ${dayCount > 1 ? `
                        <div class="activity-item">
                            <div class="activity-time">18:00-20:00</div>
                            <div class="activity-details">
                                <div class="activity-title">æ™šé¤ä¸è‡ªç”±æ´»åŠ¨</div>
                                <div class="activity-description">äº«ç”¨æ™šé¤ï¼Œè‡ªç”±æ´»åŠ¨æ—¶é—´</div>
                            </div>
                        </div>
                        ` : `
                        <div class="activity-item">
                            <div class="activity-time">17:30-19:00</div>
                            <div class="activity-details">
                                <div class="activity-title">è¿”ç¨‹</div>
                                <div class="activity-description">${transportationSelected ? 'ä¹˜ååŒ…è½¦è¿”å›' : 'è‡ªè¡Œå®‰æ’è¿”ç¨‹'}</div>
                            </div>
                        </div>
                        `}
                    `;
        } else if (i === 2) {
          dayContent = `
                        <div class="activity-item">
                            <div class="activity-time">08:00-09:00</div>
                            <div class="activity-details">
                                <div class="activity-title">æ—©é¤</div>
                                <div class="activity-description">äº«ç”¨æ—©é¤ï¼Œå‡†å¤‡å¼€å§‹æ–°ä¸€å¤©çš„ç ”å­¦æ´»åŠ¨</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">09:00-12:00</div>
                            <div class="activity-details">
                                <div class="activity-title">${project.theme}æ·±åº¦ä½“éªŒ</div>
                                <div class="activity-description">æ·±å…¥å‚ä¸${project.theme}ç›¸å…³æ´»åŠ¨ï¼Œå·©å›ºå­¦ä¹ æˆæœ</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">12:00-13:30</div>
                            <div class="activity-details">
                                <div class="activity-title">åˆé¤</div>
                                <div class="activity-description">${lunchSelected ? 'äº«ç”¨å½“åœ°ç‰¹è‰²åˆé¤' : 'è‡ªç”±ç”¨é¤æ—¶é—´'}</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">13:30-15:30</div>
                            <div class="activity-details">
                                <div class="activity-title">æˆæœå±•ç¤ºä¸åˆ†äº«</div>
                                <div class="activity-description">å±•ç¤ºç ”å­¦æˆæœï¼Œåˆ†äº«å­¦ä¹ å¿ƒå¾—</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-time">15:30-17:00</div>
                            <div class="activity-details">
                                <div class="activity-title">è¿”ç¨‹</div>
                                <div class="activity-description">${transportationSelected ? 'ä¹˜ååŒ…è½¦è¿”å›' : 'è‡ªè¡Œå®‰æ’è¿”ç¨‹'}</div>
                            </div>
                        </div>
                    `;
        } else {
          dayContent = `
                        <div class="activity-item">
                            <div class="activity-time">å…¨å¤©</div>
                            <div class="activity-details">
                                <div class="activity-title">${project.theme}æ·±åº¦æ¢ç´¢</div>
                                <div class="activity-description">å…¨å¤©æ·±å…¥ä½“éªŒ${project.theme}æ´»åŠ¨ï¼ŒåŒ…å«å®è·µæ“ä½œå’Œç†è®ºå­¦ä¹ </div>
                            </div>
                        </div>
                    `;
        }

        dayCard.innerHTML = `
                    <div class="day-header">
                        <div class="day-title">ç¬¬${i}å¤©</div>
                    </div>
                    <div class="day-content">
                        ${dayContent}
                    </div>
                `;

        itineraryDays.appendChild(dayCard);
      }

      // è®¡ç®—è´¹ç”¨
      const projectCost = project.price * (parseInt(adults) + parseInt(children));
      const lunchCost = lunchSelected ? (40 * (parseInt(adults) + parseInt(children)) * dayCount) : 0;
      const insuranceCost = insuranceSelected ? (10 * (parseInt(adults) + parseInt(children))) : 0;
      const transportationCost = transportationSelected ? (200 * (parseInt(adults) + parseInt(children))) : 0;
      const totalCost = projectCost + lunchCost + insuranceCost + transportationCost;

      // æ›´æ–°è´¹ç”¨æ˜¾ç¤º
      document.getElementById('cost-project').textContent = `Â¥${projectCost}`;
      document.getElementById('cost-lunch').textContent = `Â¥${lunchCost}`;
      document.getElementById('cost-insurance').textContent = `Â¥${insuranceCost}`;
      document.getElementById('cost-transportation').textContent = `Â¥${transportationCost}`;
      document.getElementById('cost-total').textContent = `Â¥${totalCost}`;

      // åˆ‡æ¢åˆ°è¡Œç¨‹é¡µé¢
      searchPage.classList.remove('active');
      itineraryPage.classList.add('active');
      window.scrollTo(0, 0);
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®çœä»½ä»£ç è·å–çœä»½åç§°
    function getProvinceName(code) {
      const provinces = {
        'zhejiang': 'æµ™æ±Ÿ',
        'jiangsu': 'æ±Ÿè‹',
        'anhui': 'å®‰å¾½',
        'jiangxi': 'æ±Ÿè¥¿'
      };
      return provinces[code] || '';
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®ä¸»é¢˜ä»£ç è·å–ä¸»é¢˜åç§°
    function getThemeName(code) {
      const themes = {
        'agriculture': 'ç°ä»£å†œä¸š',
        'culture': 'éé—æ–‡åŒ–',
        'red': 'çº¢è‰²æ•™è‚²',
        'nature': 'è‡ªç„¶æ¢ç´¢',
        'science': 'ç§‘æŠ€ä½“éªŒ'
      };
      return themes[code] || '';
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®å¤©æ•°ä»£ç è·å–å¤©æ•°æ–‡æœ¬
    function getDurationText(code) {
      const durations = {
        '1': '1å¤©',
        '2': '2å¤©',
        '3': '3å¤©',
        '4': '4å¤©'
      };
      return durations[code] || '';
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateString) {
      const date = new Date(dateString);
      const year = date.getFullYear();
      const month = date.getMonth() + 1;
      const day = date.getDate();
      return `${year}å¹´${month}æœˆ${day}æ—¥`;
    }
  });
</script>
</body>
</html>